<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>chain</title>
    <script src="script/chain.js"></script>
	<style>
	
	body { padding: 1em }
	h1 { margin: 0 }

	.box {
		background-color: #eee;
		padding: 1em;
		margin: 1em auto 1em auto;
		width: 500px;
	}
	
	#geninfo table { margin: auto }
	#geninfo td { padding: 0.2em }
	#geninfo td:first-child { text-align: right; }

	textarea { width: 100% }
	
	#data { height: 25em }
	#output { height: 10em }
	
	</style>
</head>
<body>

<div class="box"><textarea id="data"></textarea></div>
<div class="box" id="geninfo">
	<table>
		<tr><td>text length</td><td><input id="len" type="text" value="12" placeholder="text length" /></td></tr>
		<tr><td>first word of text</td><td><input id="fword" type="text" value="the" placeholder="first word of text" /></td></tr>
		<tr><td></td><td><input type="button" value="generate" onclick="gen();" /></td></tr>
	</table>
</div>
<div class="box"><textarea id="output"></textarea></div>
</body>

<script>
	let url = new URL(window.location.href);
	let srcurl = url.searchParams.get("source");
	
	fetch(srcurl).then((response) => response.text()).then(text => document.getElementById("data").value = text);

	function gen() {
		document.getElementById("output").value = generateText(document.getElementById("data").value,
		                                                       parseInt(document.getElementById("len").value),
		                                                       document.getElementById("fword").value);
	}
</script>

</html>